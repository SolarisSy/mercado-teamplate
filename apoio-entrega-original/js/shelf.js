var $=$,Shelf={_formatPrice:function(t,e,a,r,i){const o="\\d(?=(\\d{3})+"+((r=r||2)>0?"\\D":"$")+")";return(i=i||"R$ ")+(t=(1*(t/=100)).toFixed(Math.max(0,~~r))).replace(".",a||",").replace(new RegExp(o,"g"),"$&"+(e||"."))},_formatQuantity:function(t){return t>9?t:"0"+t},_isNumberKey:function(t){var e=t.which?t.which:event.keyCode;return!(e>31&&(e<48||e>57))},_renderLayoutView:function(t){var e=$(".ape-search-result");if(e.length)for(var a=[".prateleira",".product-summary",".product-box-price"],r=0;r<=a.length;r++){var i=a[r];if(!$(i).length)return;"list"===t?(e.attr("data-layout",t),e.find(i).addClass(i.substr(1)+"--list")):(e.attr("data-layout",t),e.find(i).removeClass(i.substr(1)+"--list"))}},_simulatePrice:async function(t,e,a){const r={items:t,country:a||"BRA"};return(await fetch(`/api/checkout/pub/orderforms/simulation?sc=${e}`,{method:"POST",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(r)})).json()},resolveInputs:function(t){var e=$(t).find('.product-quantity-control__quantity input[type="text"]');e.attr({inputmode:"numeric",pattern:"[0-9]*",maxlength:"4"}),e.on("keypress",(function(t){return Shelf._isNumberKey(t)}))},selectPrice:function(t,e){var a=$(".product-summary").filter("[data-sku-id="+t+"]"),r=a.find(".product-box-price__left"),i=a.find(".product-box-price__right"),o=a.find(".product-summary__buy .wrapper-buy-button-asynchronous"),n=a.find('.product-quantity-control__quantity input[type="text"]');if(r.removeClass("active"),i.removeClass("active"),n.length){var s=parseInt(n.val());if(i.is(":visible")&&o.is(".added"))return s<parseInt(e)?r.addClass("active"):i.addClass("active"),!1}},_slug:function(t){t=(t=t.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var e="ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;",a=0,r=e.length;a<r;a++)t=t.replace(new RegExp(e.charAt(a),"g"),"aaaaaeeeeeiiiiooooouuuunc------".charAt(a));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")},fixCollectionTitle:function(){var t=$(".shelf-collections .prateleira");let e=jssalesChannel;t.each((function(t,a,r){var i=$(a).find("h2"),o=Shelf._slug(i.text());("hortifruti"===o||"acougue"===o||"frios-e-queijos"===o)&&1==e?$(a).remove():(!function(t,e,a){t.wrapInner(`<a class="h2Title"  href='${e}'></a>`),t.append(`<a class="prateleiraVerTodos seeAll" href='${e}'>VER TUDO</a>`),$(a).closest(".shelf-collections--related").length||$(a).append(`<ul class="slick-slide" data-slick-index="9" aria-hidden="true" tabindex="-1"><li><a class="seemore-card" href='${e}'"><div><i class="icon-plus"></i><span>ver mais</span></div></a></li></ul>`)}(i,o,a),i.addClass(o),i.insertBefore($(a)),i.addClass("ready"),i.addClass("prateleiraRow"),i.find("~ .ape-skeleton").remove())})),Shelf.applyCarouselTime(),Shelf.applyCarouselShelf()},applyCarouselShelf:function(){let t=Shelf.carouselItensHandle(),e=$(".shelf-collections .prateleira").not(".slick-initialized"),a=e.closest(".shelf-collections--related");if(a.length){const e=$(".shelf-collections .prateleira > ul").length;if(!e)return a.hide();t={show:e,scroll:1}}if(window.matchMedia("(max-width:768px)").matches)return e.addClass("carousel-ready");e.each((function(e,a){$(a).slick({infinite:!1,arrows:!0,slidesToShow:t.show,slidesToScroll:t.scholl,draggable:!1,speed:300,prevArrow:'<button href="javascript:;" class="slick-prev"><svg xmlns="http://www.w3.org/2000/svg" width="7.424" height="14.598" viewBox="0 0 8.424 15.598"><defs><style>.a{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.25px;}</style></defs><g transform="translate(0.625 0.884)"><g transform="translate(1361.365 -45.37) rotate(180)"><path class="a" d="M6.915,13.83,0,6.915,6.915,0" transform="translate(1361.365 -45.37) rotate(180)"/></g></g></svg></button>',nextArrow:'<button href="javascript:;" class="slick-next"><svg xmlns="http://www.w3.org/2000/svg" width="7.424" height="14.598" viewBox="0 0 8.424 15.598"><defs><style>.a{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.25px;}</style></defs><g transform="translate(0.884 0.884)"><path class="a" d="M10.45,18.68l6.915-6.915L10.45,4.85" transform="translate(-10.45 -4.85)"/></g></svg></button>'})}))},applyCarouselTime:function(){$(".apoio-vitrine-time h2, .ape-skeleton, .bebidas a, .carrossel-aniversario h2").remove(),window.innerWidth>=800&&$(".apoio-vitrine-time, .carrossel-aniversario").not(".slick-initialized").slick({arrows:!0,dots:!0,slidesToShow:3,speed:300,infinite:!0,centerMode:!0,variableWidth:!0,mobileFirst:!0,prevArrow:'<button href="javascript:;" class="slick-prev"><svg xmlns="http://www.w3.org/2000/svg" width="8.424" height="15.598" viewBox="0 0 8.424 15.598"><defs><style>.a{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.25px;}</style></defs><g transform="translate(0.884 0.884)"><path class="a" d="M10.45,18.68l6.915-6.915L10.45,4.85" transform="translate(-10.45 -4.85)"/></g></svg></button>',nextArrow:'<button href="javascript:;" class="slick-next"><svg xmlns="http://www.w3.org/2000/svg" width="8.424" height="15.598" viewBox="0 0 8.424 15.598"><defs><style>.a{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.25px;}</style></defs><g transform="translate(0.884 0.884)"><path class="a" d="M10.45,18.68l6.915-6.915L10.45,4.85" transform="translate(-10.45 -4.85)"/></g></svg></button>',responsive:[{breakpoint:1700,settings:{slidesToShow:4,slidesToScroll:1}}]}),window.innerWidth<=800&&($(".apoio-vitrine-time h2, .ape-skeleton, .bebidas a, .carrossel-aniversario h2").remove(),$(".apoio-vitrine-time, .carrossel-aniversario").not(".slick-initialized").slick({arrows:!1,dots:!0,slidesToShow:1,slidesToScroll:1,responsive:[{breakpoint:650,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:900,settings:{slidesToShow:2,slidesToScroll:1}}]})),$(".apoio-vitrine-time, .carrossel-aniversario").removeClass(".d-none"),$(".iten-mais-vendidos-em-oferta").show()},carouselItensHandle:function(){let t=$(window).width();return t>=1500?{show:7,scroll:3}:t>=1200?{show:5,scroll:3}:t>=990?{show:4,scroll:2}:t>=768?{show:3,scroll:2}:void 0},formatPriceToCompare:function(t){return parseInt(t.replace(/[R$,' ']/g,""))},formatBestPriceToCompare:function(t){return t?Math.min(...t.match(/\d+,\d{2}/g).map((t=>{const e=parseInt(t.replace(",",""));return 0!==e?e:99999999999999}))):0},wholeSaleQuantityShelf:async function(t){t=$(t);const e=jssalesChannel,a=Shelf._getWholeSaleItemsList(t);if(!a.length)return t.addClass("ready").find(".product-box-price__right").filter(".processing").hide();const r=await Shelf._simulatePrice(a,e);r&&r.items&&r.items.length&&Shelf._applyWholeSalePriceOnShelf(r,t),t.find(".product-box-price__right.processing").hide(),t.addClass("ready")},_getWholeSaleItemsList:function(t){const e=[];for(let a=0;a<t.length;a++){const r=$(t[a]),i=r.attr("data-sku-id"),o=r.find(".product_field_293 li").text();if(o.length>0){let t={id:i,quantity:o,seller:1};e.push(t)}}return e},_applyWholeSalePriceOnShelf:function(t,e){for(let a=0;a<t.items.length;a++){if(void 0!==t.items[a+1]&&t.items[a].id===t.items[a+1].id)continue;let r=t.items[a].sellingPrice,i=t.items[a].quantity,o=Shelf._formatPrice(r);e.filter("[data-sku-id="+t.items[a].id+"]").each((function(t,e){let a=$(e),r=a.find(".product-box-price__right"),n=a.find(".product_field_293 li").text(),s=a.find(".product-box-price__best-price").text().trim();a.find(".product-box-price__label span").text(n),a.find(".product-box-price__wholesale-price").text(o),r.filter(".processing").removeClass("processing");let l=Shelf.formatBestPriceToCompare(s),d=Shelf.formatPriceToCompare(o);i<n||l===d||l<d?(a.find(".product-box-price__left").removeClass("active"),r.remove()):setInterval((()=>{r.first().toggleClass("hide-price"),r.last().toggleClass("hide-price")}),3500)}))}},resetProduct:function(t){let e=$("#___rc-p-sku-ids").val();t&&e==t&&($(".buy-btn").removeClass("btn-hidden"),$(".buy-btn").removeClass("processing"),$(".product-quantity-control").addClass("btn-hidden"),$(".ape-product__info__cart-flag").removeClass("added"),$(".ape-product__info .product-box-price__left").removeClass("active"),$(".ape-product__info .product-box-price__right").removeClass("active"))},resetShelf:function(t){if(t){$(".product-summary").find(".product-summary__buy, .product-summary__buy-box").not(".processing").addClass("disabled");var e=$(".product-summary").filter('[data-sku-id="'+t+'"]').add($("#product-qv-iframe").contents().find(".product-summary").filter("[data-sku-id="+t+"]"));e.length&&e.each((function(t,e){var a=$(e).find('.product-quantity-control__quantity input[type="text"]'),r=$(e).find(".product-box-price__left"),i=$(e).find(".product-box-price__right"),o=$(e).find(".wrapper-buy-button-asynchronous"),n=$(e).find(".product-summary__added");o.closest(".product-summary__buy").not(".processing").addClass("processing"),r.removeClass("active"),i.removeClass("active"),o.removeClass("added"),n.add($(e).find(".product-summary__pesavel")).removeClass("added"),$(e).find(".product-quantity-control__less").not(this).prop("disabled",!0),a.val(1)}))}},syncShelf:function(t,e){if(t){var a=$(".vitrine-time");a&&a.filter('[data-sku-id="'+t+'"]').length>0&&a.filter('[data-sku-id="'+t+'"]').each((function(t,e){var a=$(e),r=a.find(".botton-statico");a.find(".botton-pos-cart").removeClass("display-none"),r.addClass("display-none")}));var r=$(".product-summary").filter("[data-sku-id="+t+"]").add($("#product-qv-iframe").contents().find(".product-summary").filter("[data-sku-id="+t+"]"));r.length&&(e<1?Shelf.resetShelf(t):(r.each((function(a,r){var i=$(r).find(".product_field_293 li").text();$(r).find('.product-quantity-control__quantity input[type="text"]').val(e),$(r).find(".product-summary__added, .wrapper-buy-button-asynchronous, .product-summary__pesavel").not(".c").addClass("added"),Shelf.selectPrice(t,i)})),Shelf._buyButtonStatus(t,"done")))}},syncProduct:function(t,e){var a=$(".ape-product__info"),r=$(".ape-product__header").find("#___rc-p-sku-ids").val();if(t&&!(a.length<1)&&r==t){if(e<1)return Shelf.resetProduct(t);a.find(".buy-btn").removeClass("processing"),a.find(".ape-product__info__cart-flag").addClass("added"),a.find(".buy-btn").addClass("btn-hidden"),a.find(".product-quantity-control").removeClass("btn-hidden"),a.find('.product-quantity-control__quantity input[type="number"]').val(e)}},initShelves:function(){function t(t){var e;if(t.length)for(let a=0;a<t.length;a++){let r,i=t[a].id;void 0!==t[e=a+1]&&t[a].id==t[e].id?(r=t[a].quantity+t[e].quantity,a++):r=t[a].quantity,Shelf.syncShelf(i,r)}}try{t(vtexjs.checkout.orderForm.items)}catch{vtexjs.checkout.getOrderForm("items").done((function(e){t(e.items)}))}$(window).on("minicart-item-updated",(function(t,e){Shelf.syncShelf(e.skuId,e.quantity)})),$(window).on("minicart-item-removed",(function(t,e){Shelf.resetShelf(e.skuId),Shelf.resetProduct(e.skuId),Shelf._buyButtonStatus(e.skuId,"done"),Shelf._unlockControls(e.skuId)})),$(window).on("product-updated",(function(t,e){vtexjs.checkout.getOrderForm("items").done((function(){Shelf.syncShelf(e.skuId,e.quantity),Shelf._buyButtonStatus(e.skuId,"done")}))})),$(window).on("product-removed",(function(t,e){Shelf.resetShelf(e.skuId)}))},defineMaxQuantity:async function(){var t=$(".product-summary").not(".limit-defined");let e,a,r,i=$.cookie("VTEXSC")||"",o=[];for(t.each((function(t,e){var a=$(e).attr("data-sku-id");o.push(a)})),e=0,a=o.length;e<a;e+=49){let a="/api/catalog_system/pub/products/search?";r=o.slice(e,e+49),r.forEach((function(t,e){a+=`fq=skuId:${t}&`})),a+=`_from=0&_to=49&${i}`;try{let e=await fetch(a),r=await e.json();r&&r.forEach((e=>{t.filter('[data-product-id="'+e.productId+'"]').each((function(t,a){var r=$(a);(!e.items[0].images||e.items[0].images&&!e.items[0].images.length)&&(r.find(".product-summary__image a").append(`<img title="${e.productName}" alt="${e.productName}" itemprop="image" src="https://busca.apoioentrega.com/images/fallback-image.jpg">`),r.closest("ul").hide());var i=e.items[0].sellers;if(i.length>0){let t=i[0].commertialOffer.AvailableQuantity;r.attr("data-max-quantity",t),r.addClass("limit-defined")}else console.log("Item indisponível")}))}))}catch(t){console.log("error",t)}}},_addToCart:function(t){var e=t.match(/sku\=([0-9]+)/i),a=t.match(/qty\=([0-9]+)/i),r=t.match(/seller\=([0-9]+)/i),i=t.match(/sc\=([0-9]+)/i),o={id:e[1],quantity:a[1],seller:r[1]};return vtexjs.checkout.addToCart([o],null,i[1])},_buyButtonStatus:function(t,e,a){var r=$(".product-summary").add($("#product-qv-iframe").contents().find(".product-summary"));"processing"==e?(r.find(".product-quantity-control__less").prop("disabled",!0),r.find(".product-summary__buy, .product-summary__buy-box").addClass("disabled")):(r.find(".product-quantity-control__less").prop("disabled",!1),r.find(".product-summary__buy, .product-summary__buy-box").removeClass("disabled")),r.filter('[data-sku-id="'+t+'"]').each((function(t,r){var i=$(r),o=i.find(".product-summary__buy"),n=i.find(".product-summary__buy-box");"processing"==e?(void 0===a&&o.not(".processing").addClass("processing"),n.not(".processing").addClass("processing")):(void 0===a&&o.filter(".processing").removeClass("processing"),n.filter(".processing").removeClass("processing"))}))},addToMiniCart:function(){$(document.body).on("click tap",".product-summary__buy:not(.ready) a",(function(t){t.preventDefault(),Shelf.addItemToMinicart($(this))})),$(document.body).on("click tap",".product-summary__buy-box",(function(t){t.preventDefault(),Shelf.addBoxToMiniCart($(this))})),$(document.body).on("click tap",".product-summary__buy02:not(.ready) a",(function(t){t.preventDefault(),Shelf.addItemToMinicartVitrineTime($(this))}))},addItemToMinicart:function(t){let e=t.closest(".product-summary").attr("data-sku-id"),a=t.attr("href");Shelf._buyButtonStatus(e,"processing"),Shelf._addToCart(a).done((function(){Shelf.syncShelf(e,1),Shelf.syncProduct(e,1),Shelf.preventMinicartLocked()}))},addItemToMinicartVitrineTime:function(t){let e=t.closest(".vitrine-time").attr("data-sku-id"),a=t.attr("href");$(".vitrine-time").add($("#product-qv-iframe").contents().find(".vitrine-time")).filter('[data-sku-id="'+e+'"]').each((function(t,e){var a=$(e),r=a.find(".botton-statico"),i=a.find(".botton-pos-cart");r.addClass("display-none"),i.removeClass("display-none")})),Shelf._addToCart(a).done((function(){Shelf.preventMinicartLocked()}))},addBoxToMiniCart:function(t){let e=t.closest(".product-summary"),a=e.attr("data-sku-id"),r=parseInt(e.find(".product_field_295 li").text()),i=t.attr("href"),o=e.find("a.espiar-btn").text().trim(),n=parseInt(e.attr("data-max-quantity")),s=parseInt(e.find(".product_field_search_linx li, .product_field_autocomplete li, .product_field_300 li").text()),l=Shelf._getItemIndex(a);void 0!==l&&(r+=vtexjs.checkout.orderForm.items[l].quantity);let d=parseInt(Shelf.handleProductLimit(n,s,r,o));d&&(i=Shelf.formatUrlQuantity(i,r,d),r=d),void 0===l?(Shelf._buyButtonStatus(a,"processing"),Shelf._addToCart(i).done((function(){Shelf.syncShelf(a,r),Shelf.syncProduct(a,r),Shelf.preventMinicartLocked()}))):void 0!==l&&(Shelf._buyButtonStatus(a,"processing","box"),Shelf._updateCart(a,r).done((function(){Shelf.syncShelf(a,r),Shelf.syncProduct(a,r)})))},preventMinicartLocked:function(){let t=$(".cart"),e=localStorage.getItem("unlockMinicart");e&&"false"!=e||(t.addClass("active"),Minicart.handleMinicartPushContent(),$(".cart-backdrop").addClass("active"))},applyBoxUnits:function(t){if(!t)return;const e=t.querySelector(".product-summary__buy-box"),a=t.querySelector(".product_field_295 li");if(e)if(a&&a.textContent>"1"){const r=t.querySelector(".wrapper-buy-button-asynchronous .add a").getAttribute("href"),i=Shelf.formatUrlQuantity(r,1,parseInt(a.textContent));e.setAttribute("href",i),e.classList.remove("disabled")}else e.remove()},formatUrlQuantity:function(t,e,a){return t.replace(`qty=${e}`,`qty=${a}`)},toggleLayoutView:function(){var t=$(".ape-search-result");if(t.length){var e=$(".layout-view__item"),a=t.attr("data-layout");e.length&&(Shelf._renderLayoutView(a),e.on("click",(function(){var t=$(this),a=t.is(".layout-view__item--list")?"list":"grid";e.not(this).removeClass("active"),t.addClass("active"),Shelf._renderLayoutView(a)})))}},_getItemIndex(t){const e=vtexjs.checkout.orderForm.items;for(var a=0;a<e.length;a++)if(e[a].id==t)return a},_updateCartMount:function(t,e){if(!(e<0)){var a=Shelf._getItemIndex(t),r=[{index:a,quantity:e},{index:a+1,quantity:0}];return vtexjs.checkout.updateItems(r,"items",!1)}},_updateCart:function(t,e){if(!(e<0)){var a={index:Shelf._getItemIndex(t),quantity:e};return vtexjs.checkout.updateItems([a],"items",!1)}},_updateCartProductSplited:function(t,e,a){if(!(e<0)){var r=[{index:a,quantity:e},{index:a+1,quantity:0}];return vtexjs.checkout.updateItems(r,"items",!1)}},_removeItem:function(t){return vtexjs.checkout.getOrderForm().then((function(e){var a=e.items,r=Shelf._getItemIndex(t),i=[];if(void 0===r)return $.Deferred().reject().promise();for(var o=r;o<a.length;o++)a[o].id==t&&i.push({index:o,quantity:0});return vtexjs.checkout.removeItems(i,"items")}))},_removeFailed:function(t){setTimeout((function(){Shelf._unlockControls(t)}),500)},_unlockControls:function(t){var e=$(".product-summary").filter("[data-sku-id="+t+"]").add($("#product-qv-iframe").contents().find(".product-summary").filter("[data-sku-id="+t+"]"));e.each((function(t,a){var r=$(a).find(".product-summary__buy").filter(".processing");e.find(".product-quantity-control button:disabled").prop("disabled",!1),e.find(".product-summary__buy").removeClass("disabled"),r.removeClass("processing")}))},checkLimitAvailable:function(t){let e=jssalesChannel;return $.ajax({url:`/produto/sku/${t}?sc=${e}`,type:"GET",method:"GET"})},handleProductLimit:function(t,e,a,r){let i=parseInt(e),o=parseInt(t),n=null,s=null;if(i&&i<o?(n=i,s="client"):(n=o,s="stock"),n<a)return"stock"==s?$(".limit-alert-message").text(`A quantidade desejada para o item "${r}" não está disponível.`):$(".limit-alert-message").text(`Item limitado a ${n} unidades por cliente.`),$(".limit-alert").addClass("opened"),$(".progress_time div").css({width:"100%","-webkit-transition":"4s linear"}),setTimeout((function(){$(".limit-alert").removeClass("opened"),$(".progress_time div").css({width:"0px","-webkit-transition":""})}),4e3),n},quantityControl:function(){$(document.body).on("click tap",".product-summary .product-quantity-control button",(function(t){let e=$(this),a=e.closest(".product-summary").find("a.espiar-btn").text().trim(),r=e.closest(".product-summary").attr("data-sku-id"),i=e.closest(".product-summary").attr("data-max-quantity"),o=e.closest(".product-summary").find(".product_field_search_linx li, .product_field_autocomplete li, .product_field_300 li").text();o=o||e.closest(".product-summary").find('input.valor-caixa[name="LimitadorVenda"]').attr("value");let n=e.closest(".product-summary").find('.product-quantity-control__quantity input[type="text"]'),s=parseInt(n.val());e.is(".product-quantity-control__less")&&s--,e.is(".product-quantity-control__more")&&s++;let l=Shelf.quantityAvailable(i,o,s,a);"unavailable"!==l&&(Shelf.sendNewQuantityToOrderForm(r,s,l),Shelf.syncShelf(r,s))}))},quantityAvailable:function(t,e,a,r){if(a<=0)return"productRemoved";return Shelf.handleProductLimit(t,e,a,r)?"unavailable":"available"},sendNewQuantityToOrderForm:function(t,e,a){return{productRemoved:function(){Shelf._removeItem(t).done((function(){Shelf._unlockControls(t),Shelf._buyButtonStatus(t,"done")})).fail((function(){console.error("skuId exception",t),Shelf._removeFailed(t)}))},available:function(){let a=vtexjs.checkout.orderForm.items,r=Shelf._getItemIndex(t);clearTimeout(window.productTimeoutList[t]),window.productTimeoutList[t]=setTimeout((function(){void 0!==a[r+1]&&a[r+1].id==t?Shelf._updateCartProductSplited(t,e,r):Shelf._updateCart(t,e)}),500)},unavailable:function(){}}[a]()},quantityOnFocusOut:function(){function t(){var t=$(this),e=$(".product-summary"),a=t.closest(".product-summary").attr("data-sku-id"),r=parseInt(t.val()),i=t.closest(".product-summary").attr("data-max-quantity"),o=Shelf._getItemIndex(a),n=vtexjs.checkout.orderForm.items;isNaN(r)&&(r=0),r<1&&Shelf._removeItem(a).done((function(){Shelf._unlockControls(a),Shelf._buyButtonStatus(a,"done")})).fail((function(){Shelf._removeFailed(a)})),e.filter('[data-sku-id="'+a+'"]').each((function(t,e){var o=$(e).find(".product_field_293 li").text(),n=$(e).find(".product_field_search_linx li, .product_field_autocomplete li, .product_field_300 li").text();n=n||$(e).find('input.valor-caixa[name="LimitadorVenda"]').attr("value");let s=$(e).find("a.espiar-btn").text().trim(),l=Shelf.handleProductLimit(i,n,r,s);l?($(e).find('.product-quantity-control__quantity input[type="text"]').val(l),r=l):$(e).find('.product-quantity-control__quantity input[type="text"]').val(r),Shelf.selectPrice(a,o)})),void 0!==n[o+1]&&n[o+1].id==a?Shelf._updateCartMount(a,r):Shelf._updateCart(a,r),Shelf.syncProduct(a,r),r<1&&(Shelf.resetShelf(a),Shelf.syncProduct(a,0))}$(document.body).on("blur",'.product-summary .product-quantity-control__quantity input[type="text"]',t),$('.product-summary .product-quantity-control__quantity input[type="text"]').on("blur",t)},applyImageLoad:function(){$(".product-summary").QD_smartImageLoad({sizes:{width:"89",height:"89"}})},backToTopButton:function(){$(".back-to-top").on("click",(function(t){t.preventDefault(),$("body,html").animate({scrollTop:0},1e3)}))},applyFlagCashBack:function(t){const e=$(t);e.find(".product-summary__left-tag").append("<div class='tag-cashback'></div>");const a=e.find(".tag-cashback");if(a.append("<div class='product-summary__left-tag__slogan-cashback'></div>"),a.append("<span class='product-summary__left-tag__mechanic-cashback'></span>"),a.hasClass("show-tag product-summary__left-tag--cashback"))return;const r=e.find(".product-summary__left-tag__mechanic-cashback"),i=e.find(".product_field_297 li").text(),o=e.find(".product_field_299 li").text(),n=e.find(".product_field_301 li").text();if("True"===i)if(a.addClass("show-tag product-summary__left-tag--cashback"),"1"===n){parseFloat(o)>=5?(a.removeClass("product-summary__left-tag--cashback"),a.addClass("show-tag product-summary__left-tag--cashbackmin"),r.append(parseInt(o).toFixed(0)+"<i>%</i>")):a.removeClass("show-tag")}else r.append("<i>R$</i>"+parseFloat(o).toFixed(2).replace(/[\.]/g,","))},applyPercentageDiscount:function(t){const e=$(t),a=e.find(".product-summary__left-tag"),r=e.find(".product-summary__left-tag__slogan");if(a.find("product-summary__left-tag--cashback").length>0)r.addClass("esconder-flag");else{r.removeClass("esconder-flag");const t=Number(r.text().match(/(\d)+\,?(\d)*/i)[0].replace(",",".")),e=Utils.fixPercentValue(t);if(a.hasClass("product-summary__left-tag--percentage-discount"))return;if(e<30)return r.text("");r.text(`-${e}%`),a.addClass("show-tag product-summary__left-tag--percentage-discount")}},applyPresihablePrices:function(t,e){const a=t.querySelector(".product-box-price__best-price__weight li"),r=t.querySelector(".product-box-price--perishable .product-box-price__best-price");void 0!==e&&"un"!==e.measurementUnit&&r&&a&&(a.textContent=`${e.unitMultiplier}${e.measurementUnit}`,e.listPrice===e.price?(t.querySelector(".product-box-price__kilogram__best-price__value").textContent=`${Shelf._formatPrice(e.price)} /${e.measurementUnit}`,t.querySelector(".product-box-price__kilogram").classList.add("product-box-price__kilogram--has-not-list-price")):t.querySelector(".product-box-price__kilogram__list-price__value").innerHTML=`de <span>${Shelf._formatPrice(e.listPrice)}</span> por ${Shelf._formatPrice(e.price)} /${e.measurementUnit}`,r.childNodes[0].nodeValue=Shelf._formatPrice(e.sellingPrice),t.querySelector(".product-summary__footer").classList.add("show-perishable-price"),$(t).find(".product-summary__buy-box").hide())},handleProductSpecifications:function(t){const e=t.querySelectorAll(".product-field");for(let t=0;t<e.length;t++){const a=e[t].querySelectorAll("li");a.length>1&&a[1].remove(),0===a[0].textContent.length&&a[0].parentNode.parentNode.remove(),"No"===a[0].textContent&&a[0].parentNode.parentNode.remove()}}};$((function(){const t=document.querySelectorAll(".product-summary:not(.ready)"),e=[];Shelf.wholeSaleQuantityShelf(t);for(let a=0;a<t.length;a++)e.push({id:$(t[a]).attr("data-sku-id"),quantity:1,seller:1}),Shelf.handleProductSpecifications(t[a]),Shelf.applyBoxUnits(t[a]),Shelf.applyFlagCashBack(t[a]),Shelf.resolveInputs(t[a]),Shelf.applyPercentageDiscount(t[a]);Shelf._simulatePrice(e,jssalesChannel).then((({items:e})=>{for(let a=0;a<t.length;a++)Shelf.applyPresihablePrices(t[a],e[a])})),$(".ape-search-result .ape-search-result__shelf").removeClass("shelf-loading"),$(".ape-search-result .ape-search-result__loading").css("display","none"),Shelf.backToTopButton()})),$(document).ready((function(){ProductOverlay.openFrame(),Shelf.initShelves(),Shelf.addToMiniCart(),Shelf.quantityControl(),Shelf.quantityOnFocusOut(),Shelf.applyImageLoad(),Shelf.fixCollectionTitle()})),$(window).load((function(){Shelf.defineMaxQuantity()})),$(document).ajaxStop((function(){Shelf.resolveInputs(),Shelf.applyImageLoad()}));
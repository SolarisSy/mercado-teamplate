const ProductOverlay={mountProductOverlayUrl:function(e){let t=window.location.href,r=new URL(e);return/#&search-term=/i.test(t)||(null===window.history.state?window.history.pushState({stateUrl:r.href},"",r.href):window.history.replaceState({stateUrl:r.href},"",r.href)),{previusUrl:t,currentUrl:r}},closeProductOverlay:function(e){$(".close-product-qv-iframe button").click((function(){$("body").removeClass("overflow-hidden"),$("#product-qv-iframe-wrapper").removeClass("wrapper-open"),$(".iframe-content-inner").empty(),/#&search-term=/i.test(e)||window.history.replaceState({stateUrl:e},"",e)}))},iframeBuyBtnOpenCart:function(){$("#product-qv-iframe").contents().find(".buy-btn").click((function(){var e=localStorage.getItem("unlockMinicart");$("#product-qv-iframe").contents().find(".cart").hide(),e&&"false"!=e||($("body").find(".cart").addClass("active"),$("body").find(".cart").addClass("cart-opened"),$("body").find(".cart").removeClass("cart-closed"),$("body").addClass("minicart-opened"),$("body").removeClass("minicart-closed"),$(".cart-backdrop").addClass("active"))}))},redirectRatingLink:function(){$("#product-qv-iframe").contents().find("a#rtAvaliacao_A").click((function(e){e.preventDefault(),$("#product-qv-iframe").contents().find(".publique a").attr("target","_blank")}))},indicatesQuantityOverlay:function(e,t,r){let a=r.find(".ape-product__info .product-box-price__left"),i=r.find(".ape-product__info .product-box-price__right");if(a.removeClass("active"),i.removeClass("active"),!(e<1))return i.is(":hidden")?(a.removeClass("active"),i.removeClass("active")):e<t?(a.addClass("active"),i.removeClass("active")):(i.addClass("active"),a.removeClass("active")),$('.product-quantity-control__quantity input[type="number"]').val(e),!1},resetProductOverlay:function(e){let t=$("#product-qv-iframe").contents(),r=t.find("#___rc-p-sku-ids").val();e&&r==e&&(t.find(".buy-btn").removeClass("btn-hidden"),t.find(".buy-btn").removeClass("processing"),t.find(".product-quantity-control").addClass("btn-hidden"),t.find(".ape-product__info__cart-flag").removeClass("added"),t.find(".ape-product__info .product-box-price__left").removeClass("active"),t.find(".ape-product__info .product-box-price__right").removeClass("active"))},getMinicartTriggersOnOverlay:function(e){$(window).on("minicart-item-removed",(function(e,t){ProductOverlay.resetProductOverlay(t.skuId)})),$(window).on("minicart-item-updated",(function(t,r){let a=e.find('.product-quantity-control__quantity input[type="number"]');var i=parseInt(e.find("td.value-field.Quantidade-para-atacado").text());a.val(r.quantity),ProductOverlay.indicatesQuantityOverlay(r.quantity,i,e)}))},openFrame:function(){$(document.body).on("click","a.espiar-btn, a.espiar-minicart-btn",(function(e){if(e.preventDefault(),window.screen.width<990)return window.location.href=$(this).attr("href");let t=$(this).attr("href"),{previusUrl:r,currentUrl:a}=ProductOverlay.mountProductOverlayUrl(t),i=$("#product-qv-iframe-wrapper"),n=$(".iframe-content-inner"),o=`<iframe id='product-qv-iframe' class='product-qv-iframe' name='product-qv-iframe' src="${a.href}${a.href.indexOf("?")>-1?"&":"?"}quickview=true&lid=6fdfad90-3fb1-4b2a-9604-7b48a57b9dfe"></iframe>`,c=$(".iframe-loading");i.css("z-index",2000000002),i.addClass("wrapper-open"),n.empty(),n.append(o),c.addClass("active"),$("body").addClass("overflow-hidden"),$("#product-qv-iframe").on("load",(async function(){let e=await Utils.checkUserLogin(),t=$("#product-qv-iframe").contents();var a=localStorage.getItem("unlockMinicart");(a||"true"==a)&&ProductOverlay.getMinicartTriggersOnOverlay(t),ProductOverlay.iframeBuyBtnOpenCart(),ProductOverlay.redirectRatingLink(),t.find(".category__content a").attr("target","_blank"),e.IsUserDefined||t.find(".publique a").attr("target","_blank"),t.find(".bread-crumb ul a").attr("target","_blank"),c.removeClass("active"),ProductOverlay.closeProductOverlay(r),t.find(".header")[0].parentNode.remove()}))}))}};